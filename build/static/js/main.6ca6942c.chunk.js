(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{119:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(38),i=n.n(a),s=(n(119),n(40)),o=n(17),l=n(188),u=n(197),j=n(200),d=n(13),h=n(212),b=n(213),p=n(199),O=n(214),x=n(101),m=n.n(x),f=n(102),g=n.n(f),v=n(191),y=n(104),S=n(2),w=function(){var e=r.useState(!0),t=Object(d.a)(e,2),n=t[0],c=(t[1],r.useState(null)),a=Object(d.a)(c,2),i=a[0],s=a[1],l=Object(o.f)(),j=function(){l.push("/register"),s(null)};return Object(S.jsx)("div",{children:Object(S.jsx)(u.a,{sx:{flexGrow:1},children:Object(S.jsx)(h.a,{position:"static",children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(S.jsx)(m.a,{})}),Object(S.jsx)(p.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"ECOMMERCE"}),n&&Object(S.jsxs)("div",{children:[Object(S.jsx)(O.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(S.jsx)(g.a,{})}),Object(S.jsx)(y.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(i),onClose:j,children:Object(S.jsx)(v.a,{onClick:j,children:"My account"})})]})]})})})})},k=function(e,t){var n=e.children;return Object(S.jsxs)("div",{children:[Object(S.jsx)(w,{}),Object(S.jsx)(l.a,{}),Object(S.jsx)(j.a,{style:{maxWidth:"1200px"},children:Object(S.jsx)(u.a,{})}),Object(S.jsx)("div",{className:"container",children:n})]})},C=n(16),N=n.n(C),_=n(21),E=n(195),I=n(201),P=n(204),J=n(203),A=n(202),F=n(196),D=n(27),T=n(30),L=function e(){Object(D.a)(this,e)};L.API_URL="http://compaign-002-site2.dtempurl.com/api/";var R=function(){function e(){Object(D.a)(this,e)}return Object(T.a)(e,null,[{key:"getProducts",value:function(){var e=Object(_.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(L.API_URL,"Product"));case 3:return t=e.sent,e.abrupt("return",t.json());case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0&&e.t0.error instanceof ProgressEvent)){e.next=11;break}throw new Error("A connection could not be established. Please contact an administrator.");case 11:throw Error(e.t0.error);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=n(192),G=n(103),M=n.n(G),z=n(68),U=R;z.store.setState("numberOfItems",0);var q=[];function W(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(z.useGlobalState)("numberOfItems"),s=Object(d.a)(i,2),o=s[0],l=s[1];function u(){return(u=Object(_.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.getProducts();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Something went wrong");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]);var j=null===n||void 0===n?void 0:n.map((function(e){return Object(S.jsx)(E.a,{item:!0,xs:3,children:Object(S.jsxs)(I.a,{sx:{maxWidth:345},children:[Object(S.jsx)(A.a,{component:"img",height:"140",image:"http://compaign-002-site2.dtempurl.com/".concat(e._product_imageLink),alt:"green iguana"}),Object(S.jsxs)(J.a,{children:[Object(S.jsx)(p.a,{gutterBottom:!0,variant:"h5",component:"div",children:e._product_productName}),Object(S.jsxs)(p.a,{variant:"body2",color:"text.secondary",children:["R ",e._product_price]})]}),Object(S.jsx)(P.a,{children:Object(S.jsx)(F.a,{onClick:function(){return function(e){if(q.filter((function(t){return t._product_productID===e._product_productID})).length<=0)q.push(e),localStorage.setItem("cardProducts",JSON.stringify(q)),o=q.length,l(o);else{var t=q.findIndex((function(t){return t._product_productID===e._product_productID})),n=q[t]._product_quantity+1;q[t]._product_quantity=n,localStorage.setItem("cardProducts",JSON.stringify(q)),alert("You have ".concat(n," of the same products in your cards"))}}(e)},size:"small",children:"ADD TO CARD"})})]})})}));return Object(S.jsx)(c.a.Fragment,{children:j})}var K=function(){var e=Object(o.f)(),t=Object(z.useGlobalState)("numberOfItems"),n=Object(d.a)(t,2),r=n[0];n[1];return Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{badgeContent:r,color:"error",children:Object(S.jsx)(M.a,{onClick:function(){e.push("/login")},className:"shoppingCard"})}),Object(S.jsx)(u.a,{sx:{flexGrow:1},children:Object(S.jsx)(E.a,{container:!0,spacing:1,children:Object(S.jsx)(E.a,{container:!0,item:!0,spacing:3,children:Object(S.jsx)(W,{})})})})]})},V=n(205),Q=n(193),Y=n(215),H=n(189),X=function(){function e(){Object(D.a)(this,e)}return Object(T.a)(e,null,[{key:"register",value:function(){var e=Object(_.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch("".concat(L.API_URL,"Customer"),n);case 4:e.sent,e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0&&e.t0.error instanceof ProgressEvent)){e.next=11;break}throw new Error("A connection could not be established. Please contact an administrator.");case 11:throw Error(e.t0.error);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Z=X,$=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(d.a)(a,2),s=i[0],l=i[1],j=Object(r.useState)(""),h=Object(d.a)(j,2),b=h[0],p=h[1],O=Object(r.useState)(""),x=Object(d.a)(O,2),m=x[0],f=x[1],g=Object(r.useState)(""),y=Object(d.a)(g,2),w=y[0],k=y[1],C=Object(r.useState)(""),E=Object(d.a)(C,2),I=E[0],P=E[1],J=Object(r.useState)(),A=Object(d.a)(J,2),D=A[0],T=(A[1],Object(o.f)());function L(){return(L=Object(_.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D={firstName:n,lastName:s,telephone:b,email:m,password:w,gender:I},e.prev=1,e.next=4,Z.register(D);case 4:alert("Register successfully"),T.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Something went wrong");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(S.jsxs)("div",{children:[Object(S.jsx)(F.a,{onClick:function(){T.push("/")},className:"btn-register",variant:"contained",disableElevation:!0,children:"BACK"}),Object(S.jsx)(u.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(S.jsxs)("div",{className:"register-form",children:[Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"First Name"}),Object(S.jsx)(Y.a,{id:"my-input",onChange:function(e){c(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"Last Name"}),Object(S.jsx)(Y.a,{id:"my-input",onChange:function(e){l(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"Telephone"}),Object(S.jsx)(Y.a,{id:"my-input",onChange:function(e){p(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{variant:"standard",sx:{m:1,minWidth:120},children:[Object(S.jsx)(Q.a,{id:"demo-simple-select-standard-label",children:"Gender"}),Object(S.jsxs)(H.a,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",onChange:function(e){P(e.target.value)},children:[Object(S.jsx)(v.a,{value:"",children:Object(S.jsx)("em",{children:"None"})}),Object(S.jsx)(v.a,{value:"M",children:"Male"}),Object(S.jsx)(v.a,{value:"F",children:"Female"})]})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"Email"}),Object(S.jsx)(Y.a,{id:"my-input",onChange:function(e){f(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"password"}),Object(S.jsx)(Y.a,{id:"my-input",type:"password","aria-describedby":"my-helper-text",onChange:function(e){k(e.target.value)}})]})}),Object(S.jsx)(F.a,{onClick:function(){return L.apply(this,arguments)},className:"btn-register",variant:"contained",disableElevation:!0,children:"Register"})]})})]})},ee=function(){function e(){Object(D.a)(this,e)}return Object(T.a)(e,null,[{key:"login",value:function(){var e=Object(_.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch("".concat(L.API_URL,"Account/authenticate"),n);case 4:return r=e.sent,e.abrupt("return",r.json());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0&&e.t0.error instanceof ProgressEvent)){e.next=12;break}throw new Error("A connection could not be established. Please contact an administrator.");case 12:throw Error(e.t0.error);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),te=ee,ne=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(d.a)(a,2),s=i[0],l=i[1],j=Object(r.useState)(),h=Object(d.a)(j,2),b=h[0],p=(h[1],Object(o.f)());function O(){return(O=Object(_.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b={email:n,password:s,isAdmin:!1},e.prev=1,e.next=4,te.login(b);case 4:t=e.sent,sessionStorage.setItem("user",JSON.stringify(t)),p.push("/shopping-card"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Something went wrong");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(S.jsxs)("div",{children:[Object(S.jsx)(F.a,{onClick:function(){p.push("/")},className:"btn-register",variant:"contained",disableElevation:!0,children:"BACK"}),Object(S.jsx)(u.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(S.jsxs)("div",{className:"register-form",children:[Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"Email"}),Object(S.jsx)(Y.a,{id:"my-input",onChange:function(e){c(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(V.a,{children:[Object(S.jsx)(Q.a,{htmlFor:"my-input",children:"password"}),Object(S.jsx)(Y.a,{id:"my-input",type:"password",onChange:function(e){l(e.target.value)},"aria-describedby":"my-helper-text"})]})}),Object(S.jsx)(F.a,{onClick:function(){return O.apply(this,arguments)},className:"btn-register",variant:"contained",disableElevation:!0,children:"LOGIN"})]})})]})},re=n(209),ce=n(211),ae=n(207),ie=n(208),se=n(210),oe=n(206),le=n(198),ue=function(){function e(){Object(D.a)(this,e)}return Object(T.a)(e,null,[{key:"create",value:function(){var e=Object(_.a)(N.a.mark((function e(t){var n,r,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.stringify(sessionStorage.getItem("user")),r=JSON.parse(n),c=JSON.parse(r),t.customerID=c.userID,t.customerEmail=c.email,a={method:"POST",headers:{"Content-Type":"application/json"},Authorization:"Bearer "+c.token,body:JSON.stringify(t)},e.next=9,fetch("".concat(L.API_URL,"Order"),a);case 9:e.sent,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(0),!(e.t0&&e.t0.error instanceof ProgressEvent)){e.next=16;break}throw new Error("A connection could not be established. Please contact an administrator.");case 16:throw Error(e.t0.error);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),je=ue,de=(u.a,function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),i=Object(d.a)(a,2),s=i[0],l=(i[1],Object(o.f)());function u(){return(u=Object(_.a)(N.a.mark((function e(){var t,r,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("cardProducts"),r=JSON.parse(JSON.stringify(t)),c=JSON.parse(r),a=0,c.forEach((function(e){a+=e._product_price})),s={quantity:c.length,totalPrice:a,customerEmail:"",customerID:"",orderItemString:JSON.stringify(n)},e.prev=6,e.next=9,je.create(s);case 9:alert("Order successfully"),localStorage.clear(),sessionStorage.clear(),l.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),alert("Something went wrong");case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}Object(r.useEffect)((function(){var e=localStorage.getItem("cardProducts"),t=JSON.parse(JSON.stringify(e)),n=JSON.parse(t);c(n)}),[]);var j=null===n||void 0===n?void 0:n.map((function(e,t){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(oe.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(S.jsx)(ae.a,{component:"th",scope:"row",children:e._product_productName}),Object(S.jsx)(ae.a,{align:"right",children:e._product_price}),Object(S.jsx)(ae.a,{align:"right",children:e._product_quantity})]},e._product_productID)})}));return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(F.a,{onClick:function(){return function(){return u.apply(this,arguments)}()},variant:"contained",children:"Check Out"}),Object(S.jsx)(ie.a,{component:le.a,children:Object(S.jsxs)(re.a,{sx:{minWidth:500},"aria-label":"simple table",children:[Object(S.jsx)(se.a,{children:Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(ae.a,{children:"Product Name"}),Object(S.jsx)(ae.a,{align:"right",children:"Price"}),Object(S.jsx)(ae.a,{align:"right",children:"Quantity"})]})}),Object(S.jsx)(ce.a,{children:j})]})})]})});var he=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(s.a,{children:Object(S.jsx)(k,{children:Object(S.jsxs)(o.c,{children:[Object(S.jsx)(o.a,{path:"/",exact:!0,children:Object(S.jsx)(K,{})}),Object(S.jsx)(o.a,{path:"/register",children:Object(S.jsx)($,{})}),Object(S.jsx)(o.a,{path:"/login",children:Object(S.jsx)(ne,{})}),Object(S.jsx)(o.a,{path:"/shopping-card",children:Object(S.jsx)(de,{})})]})})})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,216)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(he,{})}),document.getElementById("root")),be()}},[[130,1,2]]]);
//# sourceMappingURL=main.6ca6942c.chunk.js.map